{"id":"e533963a-0a39-46dd-8338-628b41d1fb03","revision":0,"last_node_id":644,"last_link_id":1167,"nodes":[{"id":559,"type":"GetImageSizeAndCount","pos":[1933.3355712890625,45.10702133178711],"size":[269.66265869140625,86],"flags":{"collapsed":false},"order":40,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":1034}],"outputs":[{"localized_name":"image","name":"image","type":"IMAGE","links":[]},{"label":"1280 width","localized_name":"width","name":"width","type":"INT","links":[]},{"label":"720 height","localized_name":"height","name":"height","type":"INT","links":[]},{"label":"349 count","localized_name":"count","name":"count","type":"INT","links":[1033]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"1.1.3","Node name for S&R":"GetImageSizeAndCount","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[]},{"id":553,"type":"ImageScaleToTotalPixels","pos":[383.5478210449219,-27.018352508544922],"size":[270,82],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":1076},{"localized_name":"upscale_method","name":"upscale_method","type":"COMBO","widget":{"name":"upscale_method"},"link":null},{"localized_name":"megapixels","name":"megapixels","type":"FLOAT","widget":{"name":"megapixels"},"link":1075}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[1016,1079]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.51","Node name for S&R":"ImageScaleToTotalPixels","ue_properties":{"version":"7.0.1","widget_ue_connectable":{}}},"widgets_values":["lanczos",0.01]},{"id":560,"type":"MathExpression|pysssss","pos":[2223.335205078125,35.107025146484375],"size":[210,130],"flags":{"collapsed":false},"order":44,"mode":0,"inputs":[{"localized_name":"a","name":"a","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":1033},{"localized_name":"b","name":"b","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":1037},{"localized_name":"c","name":"c","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":null},{"localized_name":"expression","name":"expression","type":"INT,FLOAT,IMAGE,LATENT","widget":{"name":"expression"},"link":null}],"outputs":[{"localized_name":"INT","name":"INT","type":"INT","links":[1036]},{"localized_name":"FLOAT","name":"FLOAT","type":"FLOAT","links":[]}],"properties":{"cnr_id":"comfyui-custom-scripts","ver":"1.2.5","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":["(a-b)"]},{"id":567,"type":"CLIPTextEncode","pos":[2895.001953125,465.2938232421875],"size":[300,47],"flags":{"collapsed":true},"order":24,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":1162},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[1050]}],"title":"Negative Prompt (leave blank cuz 1 CFG)","properties":{"cnr_id":"comfy-core","ver":"0.3.59","Node name for S&R":"CLIPTextEncode","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[""]},{"id":576,"type":"WanVideoVACEStartToEndFrame","pos":[3290.033935546875,417.26593017578125],"size":[329.9634704589844,190],"flags":{},"order":46,"mode":0,"inputs":[{"localized_name":"start_image","name":"start_image","shape":7,"type":"IMAGE","link":1090},{"localized_name":"end_image","name":"end_image","shape":7,"type":"IMAGE","link":null},{"localized_name":"control_images","name":"control_images","shape":7,"type":"IMAGE","link":null},{"localized_name":"inpaint_mask","name":"inpaint_mask","shape":7,"type":"MASK","link":null},{"localized_name":"num_frames","name":"num_frames","type":"INT","widget":{"name":"num_frames"},"link":1066},{"localized_name":"empty_frame_level","name":"empty_frame_level","type":"FLOAT","widget":{"name":"empty_frame_level"},"link":null},{"localized_name":"start_index","name":"start_index","shape":7,"type":"INT","widget":{"name":"start_index"},"link":null},{"localized_name":"end_index","name":"end_index","shape":7,"type":"INT","widget":{"name":"end_index"},"link":null}],"outputs":[{"localized_name":"images","name":"images","type":"IMAGE","links":[1105]},{"localized_name":"masks","name":"masks","type":"MASK","links":[1107]}],"properties":{"cnr_id":"comfyui-wanvideowrapper","ver":"1.3.3","Node name for S&R":"WanVideoVACEStartToEndFrame","ue_properties":{"widget_ue_connectable":{"num_frames":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[65,1,0,-1]},{"id":566,"type":"CLIPTextEncode","pos":[2897.725830078125,403.5391540527344],"size":[660,47],"flags":{"collapsed":true},"order":41,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":1161},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":1057}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[1049]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.59","Node name for S&R":"CLIPTextEncode","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[""]},{"id":552,"type":"Get Image Size","pos":[510.4762268066406,118.61275482177734],"size":[140,46],"flags":{},"order":20,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":1016}],"outputs":[{"localized_name":"width","name":"width","type":"INT","links":[1012]},{"localized_name":"height","name":"height","type":"INT","links":[1013]}],"properties":{"cnr_id":"masquerade-nodes-comfyui","ver":"432cb4d146a391b387a0cd25ace824328b5b61cf","Node name for S&R":"Get Image Size","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[]},{"id":556,"type":"MathExpression|pysssss","pos":[694.0211791992188,-26.14627456665039],"size":[210,128],"flags":{},"order":26,"mode":0,"inputs":[{"localized_name":"a","name":"a","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":1012},{"localized_name":"b","name":"b","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":null},{"localized_name":"c","name":"c","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":null},{"localized_name":"expression","name":"expression","type":"INT,FLOAT,IMAGE,LATENT","widget":{"name":"expression"},"link":null}],"outputs":[{"localized_name":"INT","name":"INT","type":"INT","links":[1015]},{"localized_name":"FLOAT","name":"FLOAT","type":"FLOAT","links":[]}],"properties":{"cnr_id":"comfyui-custom-scripts","ver":"1.2.5","ue_properties":{"widget_ue_connectable":{"expression":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":["(a/16)"]},{"id":554,"type":"MathExpression|pysssss","pos":[930.1250610351562,-27.018352508544922],"size":[210,128],"flags":{},"order":28,"mode":0,"inputs":[{"localized_name":"a","name":"a","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":1015},{"localized_name":"b","name":"b","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":null},{"localized_name":"c","name":"c","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":null},{"localized_name":"expression","name":"expression","type":"INT,FLOAT,IMAGE,LATENT","widget":{"name":"expression"},"link":null}],"outputs":[{"localized_name":"INT","name":"INT","type":"INT","links":[1019]},{"localized_name":"FLOAT","name":"FLOAT","type":"FLOAT","links":[]}],"properties":{"cnr_id":"comfyui-custom-scripts","ver":"1.2.5","ue_properties":{"widget_ue_connectable":{"expression":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":["(a*16)"]},{"id":555,"type":"MathExpression|pysssss","pos":[930.9972534179688,146.412841796875],"size":[210,128],"flags":{},"order":29,"mode":0,"inputs":[{"localized_name":"a","name":"a","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":1014},{"localized_name":"b","name":"b","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":null},{"localized_name":"c","name":"c","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":null},{"localized_name":"expression","name":"expression","type":"INT,FLOAT,IMAGE,LATENT","widget":{"name":"expression"},"link":null}],"outputs":[{"localized_name":"INT","name":"INT","type":"INT","links":[1020]},{"localized_name":"FLOAT","name":"FLOAT","type":"FLOAT","links":[]}],"properties":{"cnr_id":"comfyui-custom-scripts","ver":"1.2.5","ue_properties":{"widget_ue_connectable":{"expression":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":["(a*16)"]},{"id":571,"type":"ImageBatchMulti","pos":[961.2540283203125,557.46142578125],"size":[219.592529296875,125.84738159179688],"flags":{},"order":33,"mode":0,"inputs":[{"localized_name":"image_1","name":"image_1","type":"IMAGE","link":1062},{"localized_name":"image_2","name":"image_2","shape":7,"type":"IMAGE","link":1058},{"localized_name":"inputcount","name":"inputcount","type":"INT","widget":{"name":"inputcount"},"link":null}],"outputs":[{"localized_name":"images","name":"images","type":"IMAGE","links":[1061]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"1.1.1","ue_properties":{"version":"7.0.1","widget_ue_connectable":{"inputcount":true}}},"widgets_values":[2,null]},{"id":569,"type":"easy forLoopStart","pos":[700.55322265625,473.1012268066406],"size":[222.90982055664062,158],"flags":{},"order":31,"mode":0,"inputs":[{"localized_name":"initial_value1","name":"initial_value1","shape":7,"type":"*","link":1063},{"localized_name":"total","name":"total","type":"INT","widget":{"name":"total"},"link":1059},{"name":"initial_value2","type":"*","link":null}],"outputs":[{"localized_name":"flow","name":"flow","shape":5,"type":"FLOW_CONTROL","links":[1060]},{"localized_name":"index","name":"index","type":"INT","links":[]},{"localized_name":"value1","name":"value1","type":"*","links":[1058]},{"name":"value2","type":"*","links":[]}],"properties":{"cnr_id":"comfyui-easy-use","ver":"1.3.0","Node name for S&R":"easy forLoopStart","ue_properties":{"widget_ue_connectable":{"total":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[3],"color":"#223","bgcolor":"#335"},{"id":568,"type":"MathExpression|pysssss","pos":[447.58624267578125,553.337646484375],"size":[210,128],"flags":{},"order":15,"mode":0,"inputs":[{"localized_name":"a","name":"a","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":1064},{"localized_name":"b","name":"b","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":null},{"localized_name":"c","name":"c","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":null},{"localized_name":"expression","name":"expression","type":"INT,FLOAT,IMAGE,LATENT","widget":{"name":"expression"},"link":null}],"outputs":[{"localized_name":"INT","name":"INT","type":"INT","links":[1059]},{"localized_name":"FLOAT","name":"FLOAT","type":"FLOAT","links":[]}],"properties":{"cnr_id":"comfyui-custom-scripts","ver":"1.2.5","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":["a-1"]},{"id":570,"type":"easy forLoopEnd","pos":[1206.8934326171875,472.69378662109375],"size":[215.44309997558594,90.67858123779297],"flags":{},"order":34,"mode":0,"inputs":[{"localized_name":"flow","name":"flow","shape":5,"type":"FLOW_CONTROL","link":1060},{"localized_name":"initial_value1","name":"initial_value1","shape":7,"type":"*","link":1061},{"name":"initial_value2","type":"*","link":null}],"outputs":[{"localized_name":"value1","name":"value1","type":"*","links":[1065]},{"name":"value2","type":"*","links":[]}],"properties":{"cnr_id":"comfyui-easy-use","ver":"1.3.0","Node name for S&R":"easy forLoopEnd","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[],"color":"#223","bgcolor":"#335"},{"id":617,"type":"Switch from any [Crystools]","pos":[3304.357666015625,162.18675231933594],"size":[270,78],"flags":{},"order":47,"mode":0,"inputs":[{"localized_name":"any","name":"any","type":"*","link":1105},{"localized_name":"boolean","name":"boolean","type":"BOOLEAN","widget":{"name":"boolean"},"link":1110}],"outputs":[{"localized_name":"on_true","name":"on_true","type":"*","links":[1106]},{"localized_name":"on_false","name":"on_false","type":"*","links":null}],"properties":{"cnr_id":"ComfyUI-Crystools","ver":"2af9ccf0a29c6910e6fcbdd7d2fe96f9bde44eed","Node name for S&R":"Switch from any [Crystools]","ue_properties":{"widget_ue_connectable":{"boolean":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[true]},{"id":586,"type":"ImageScale","pos":[1166.6375732421875,-28.52583885192871],"size":[270,130],"flags":{},"order":30,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":1079},{"localized_name":"upscale_method","name":"upscale_method","type":"COMBO","widget":{"name":"upscale_method"},"link":null},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":1019},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":1020},{"localized_name":"crop","name":"crop","type":"COMBO","widget":{"name":"crop"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[1062,1063,1068,1121]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.59","Node name for S&R":"ImageScale","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":["lanczos",512,512,"center"]},{"id":575,"type":"ImageFromBatch+","pos":[2453.335205078125,25.10702896118164],"size":[270,82],"flags":{},"order":45,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":1035},{"localized_name":"start","name":"start","type":"INT","widget":{"name":"start"},"link":1036},{"localized_name":"length","name":"length","type":"INT","widget":{"name":"length"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[1090]}],"properties":{"cnr_id":"comfyui_essentials","ver":"1.1.0","Node name for S&R":"ImageFromBatch+","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[10,-1]},{"id":585,"type":"Int","pos":[1590.0506591796875,693.1658935546875],"size":[270,58],"flags":{"collapsed":false},"order":0,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"INT","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"INT","name":"INT","type":"INT","links":[1023,1037,1064,1071,1072,1134]}],"title":"Overlapping Frames","properties":{"cnr_id":"comfyui-logic","ver":"1.0.0","Node name for S&R":"Int","ue_properties":{"widget_ue_connectable":{"value":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[12]},{"id":564,"type":"VRAM_Debug","pos":[4287.3818359375,182.4132843017578],"size":[291.1640625,114],"flags":{"collapsed":true},"order":52,"mode":0,"inputs":[{"localized_name":"any_input","name":"any_input","shape":7,"type":"*","link":1140},{"localized_name":"image_pass","name":"image_pass","shape":7,"type":"IMAGE","link":null},{"localized_name":"model_pass","name":"model_pass","shape":7,"type":"MODEL","link":null},{"localized_name":"empty_cache","name":"empty_cache","type":"BOOLEAN","widget":{"name":"empty_cache"},"link":null},{"localized_name":"gc_collect","name":"gc_collect","type":"BOOLEAN","widget":{"name":"gc_collect"},"link":null},{"localized_name":"unload_all_models","name":"unload_all_models","type":"BOOLEAN","widget":{"name":"unload_all_models"},"link":null}],"outputs":[{"localized_name":"any_output","name":"any_output","type":"*","links":[1041]},{"localized_name":"image_pass","name":"image_pass","type":"IMAGE","links":[]},{"localized_name":"model_pass","name":"model_pass","type":"MODEL","links":[]},{"label":"14,423,059,904   freemem_before","localized_name":"freemem_before","name":"freemem_before","type":"INT","links":[]},{"label":"15,637,282,816      freemem_after","localized_name":"freemem_after","name":"freemem_after","type":"INT","links":[]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"1.1.6","Node name for S&R":"VRAM_Debug","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[true,true,true]},{"id":578,"type":"GetImageSize+","pos":[3297.04052734375,665.0909423828125],"size":[184.87013244628906,66],"flags":{},"order":32,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":1068}],"outputs":[{"localized_name":"width","name":"width","type":"INT","links":[1069]},{"localized_name":"height","name":"height","type":"INT","links":[1070]},{"localized_name":"count","name":"count","type":"INT","links":[]}],"properties":{"cnr_id":"comfyui_essentials","ver":"1.1.0","Node name for S&R":"GetImageSize+","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[]},{"id":624,"type":"ImageFromBatch+","pos":[4268.98974609375,387.33905029296875],"size":[210,87.54936981201172],"flags":{},"order":55,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":1122},{"localized_name":"start","name":"start","type":"INT","widget":{"name":"start"},"link":1136},{"localized_name":"length","name":"length","type":"INT","widget":{"name":"length"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[1123]}],"title":"🔧 Sample From Batch","properties":{"cnr_id":"comfyui_essentials","ver":"1.1.0","Node name for S&R":"ImageFromBatch+","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[12,1]},{"id":625,"type":"Switch any [Crystools]","pos":[4274.50146484375,536.1085205078125],"size":[227.19056701660156,78],"flags":{},"order":57,"mode":0,"inputs":[{"localized_name":"on_true","name":"on_true","type":"*","link":1127},{"localized_name":"on_false","name":"on_false","type":"*","link":1123},{"localized_name":"boolean","name":"boolean","type":"BOOLEAN","widget":{"name":"boolean"},"link":1132}],"outputs":[{"localized_name":"*","name":"*","type":"*","links":[1125,1130]}],"title":"🪛 Save initial batch color","properties":{"cnr_id":"ComfyUI-Crystools","ver":"2af9ccf0a29c6910e6fcbdd7d2fe96f9bde44eed","Node name for S&R":"Switch any [Crystools]","ue_properties":{"widget_ue_connectable":{"boolean":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[true]},{"id":587,"type":"ImageColorMatch+","pos":[4458.1630859375,171.8190155029297],"size":[210,170],"flags":{},"order":54,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":1048},{"localized_name":"reference","name":"reference","type":"IMAGE","link":1128},{"localized_name":"reference_mask","name":"reference_mask","shape":7,"type":"MASK","link":null},{"localized_name":"color_space","name":"color_space","type":"COMBO","widget":{"name":"color_space"},"link":null},{"localized_name":"factor","name":"factor","type":"FLOAT","widget":{"name":"factor"},"link":null},{"localized_name":"device","name":"device","type":"COMBO","widget":{"name":"device"},"link":null},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[1117]}],"properties":{"cnr_id":"comfyui_essentials","ver":"9d9f4bedfc9f0321c19faf71855e228c93bd0dc9","Node name for S&R":"ImageColorMatch+","ue_properties":{"version":"7.1","widget_ue_connectable":{},"input_ue_unconnectable":{}}},"widgets_values":["LAB",1,"auto",0]},{"id":602,"type":"MathExpression|pysssss","pos":[2531.88818359375,278.50921630859375],"size":[210,130],"flags":{"collapsed":false},"order":37,"mode":0,"inputs":[{"localized_name":"a","name":"a","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":1083},{"localized_name":"b","name":"b","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":1084},{"localized_name":"c","name":"c","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":null},{"localized_name":"expression","name":"expression","type":"INT,FLOAT,IMAGE,LATENT","widget":{"name":"expression"},"link":null}],"outputs":[{"localized_name":"INT","name":"INT","type":"INT","links":[1085]},{"localized_name":"FLOAT","name":"FLOAT","type":"FLOAT","links":[]}],"properties":{"cnr_id":"comfyui-custom-scripts","ver":"1.2.5","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":["(a+b)"]},{"id":603,"type":"easy seed","pos":[2224.11865234375,285.00872802734375],"size":[270,106],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null}],"outputs":[{"localized_name":"seed","name":"seed","type":"INT","links":[1083]}],"properties":{"cnr_id":"comfyui-easy-use","ver":"1.3.3","Node name for S&R":"easy seed","ue_properties":{"widget_ue_connectable":{"seed":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[162602879852866,"randomize",null]},{"id":565,"type":"StringFromList","pos":[1937.4779052734375,284.2965087890625],"size":[250,98],"flags":{"collapsed":false},"order":36,"mode":0,"inputs":[{"localized_name":"list_input","name":"list_input","type":"STRING","link":1028},{"localized_name":"index","name":"index","type":"INT","widget":{"name":"index"},"link":1029}],"outputs":[{"localized_name":"list item","name":"list item","shape":6,"type":"STRING","links":[1057]},{"localized_name":"size","name":"size","type":"INT","links":[]},{"localized_name":"wraps","name":"wraps","shape":6,"type":"INT","links":[]}],"properties":{"cnr_id":"comfyui-selectstringfromlistwithindex","ver":"1.0.0","Node name for S&R":"StringFromList","ue_properties":{"widget_ue_connectable":{"index":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[0]},{"id":601,"type":"Note","pos":[2224.353271484375,448.5964660644531],"size":[508.65966796875,88],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[],"properties":{"ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":["Offset the seed for each batch. The loop can then repeat a prompt with variation."],"color":"#432","bgcolor":"#653"},{"id":630,"type":"MathExpression|pysssss","pos":[2509.340576171875,685.2423095703125],"size":[210,128],"flags":{"collapsed":false},"order":22,"mode":0,"inputs":[{"localized_name":"a","name":"a","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":1135},{"localized_name":"b","name":"b","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":1134},{"localized_name":"c","name":"c","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":null},{"localized_name":"expression","name":"expression","type":"INT,FLOAT,IMAGE,LATENT","widget":{"name":"expression"},"link":null}],"outputs":[{"localized_name":"INT","name":"INT","type":"INT","links":[1136]},{"localized_name":"FLOAT","name":"FLOAT","type":"FLOAT","links":[]}],"title":"Frame color sample","properties":{"cnr_id":"comfyui-custom-scripts","ver":"1.2.5","ue_properties":{"version":"7.0.1","widget_ue_connectable":{"expression":true}}},"widgets_values":["(a-b)"]},{"id":573,"type":"MathExpression|pysssss","pos":[2244.53271484375,692.6572875976562],"size":[210,128],"flags":{"collapsed":false},"order":3,"mode":0,"inputs":[{"localized_name":"a","name":"a","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":null},{"localized_name":"b","name":"b","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":null},{"localized_name":"c","name":"c","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":null},{"localized_name":"expression","name":"expression","type":"INT,FLOAT,IMAGE,LATENT","widget":{"name":"expression"},"link":null}],"outputs":[{"localized_name":"INT","name":"INT","type":"INT","links":[1009]},{"localized_name":"FLOAT","name":"FLOAT","type":"FLOAT","links":[1010]}],"title":"FPS","properties":{"cnr_id":"comfyui-custom-scripts","ver":"1.2.5","ue_properties":{"version":"7.0.1","widget_ue_connectable":{"expression":true}}},"widgets_values":["16"]},{"id":580,"type":"MathExpression|pysssss","pos":[1935.7110595703125,685.5491943359375],"size":[210,128],"flags":{"collapsed":false},"order":17,"mode":0,"inputs":[{"localized_name":"a","name":"a","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":1074},{"localized_name":"b","name":"b","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":1009},{"localized_name":"c","name":"c","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":null},{"localized_name":"expression","name":"expression","type":"INT,FLOAT,IMAGE,LATENT","widget":{"name":"expression"},"link":null}],"outputs":[{"localized_name":"INT","name":"INT","type":"INT","links":[1022,1135]},{"localized_name":"FLOAT","name":"FLOAT","type":"FLOAT","links":[]}],"title":"Frames/batch","properties":{"cnr_id":"comfyui-custom-scripts","ver":"1.2.5","ue_properties":{"version":"7.0.1","widget_ue_connectable":{"expression":true}}},"widgets_values":["(a*b)+1"]},{"id":579,"type":"MathExpression|pysssss","pos":[2888.0830078125,511.3496398925781],"size":[370,130],"flags":{"collapsed":false},"order":21,"mode":0,"inputs":[{"localized_name":"a","name":"a","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":1022},{"localized_name":"b","name":"b","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":1023},{"localized_name":"c","name":"c","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":null},{"localized_name":"expression","name":"expression","type":"INT,FLOAT,IMAGE,LATENT","widget":{"name":"expression"},"link":null}],"outputs":[{"localized_name":"INT","name":"INT","type":"INT","links":[1066,1067]},{"localized_name":"FLOAT","name":"FLOAT","type":"FLOAT","links":[]}],"title":"Total frame amount with overlapping","properties":{"cnr_id":"comfyui-custom-scripts","ver":"1.2.5","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":["a+b"]},{"id":631,"type":"Note","pos":[2874.04296875,-60.88203430175781],"size":[532.0588989257812,125.19024658203125],"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[],"properties":{"ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":["Special handling is needed for first loop. T2V must skip the first reference image/frames.\n\nThis switch method was the only way I saw possible to null input to the VACE control_video and control_masks\n\nThe reference image is input as value_2, but we save the effective color sample during the first batch. It becomes the new value_2 for the rest of the loops."],"color":"#432","bgcolor":"#653"},{"id":629,"type":"Note","pos":[4261.513671875,-74.37334442138672],"size":[765.564453125,146.55560302734375],"flags":{},"order":5,"mode":0,"inputs":[],"outputs":[],"properties":{"ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":["Reference images and frames are really not respected enough color wise for the video. We have to work around this problem.\nIf we use T2V and try to color correct it, from any reference image, this will give us a horrible result. In the case of I2V, our instinct is to color correct to the original image. This is a fallacy as the generated video really wants its own palette. It is not a terrible palette in the initial batch, but will naturally degrade in further batches.\nWe want to preserve a frame somewhere in the first batch. Then in subsequent loops, we then color match to that sample.\n\n\nhttps://huggingface.co/Phr00t recommends ipndm/beta for Rapid AIO 3.0 or euler_a/beta for Rapid AIO NSFW v3.1."],"color":"#432","bgcolor":"#653"},{"id":595,"type":"PrimitiveString","pos":[-140,-40],"size":[380,60],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"STRING","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[1077]}],"title":"Filename","properties":{"cnr_id":"comfy-core","ver":"0.3.60","Node name for S&R":"PrimitiveString","ue_properties":{"widget_ue_connectable":{"value":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":["rapid-aio/long"],"color":"#232","bgcolor":"#353"},{"id":627,"type":"PreviewImage","pos":[4550.83056640625,409.94952392578125],"size":[464.2411804199219,325.6658020019531],"flags":{},"order":59,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":1130}],"outputs":[],"title":"Preview Image - Color Match Sample","properties":{"cnr_id":"comfy-core","ver":"0.3.60","Node name for S&R":"PreviewImage","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[]},{"id":619,"type":"Switch from any [Crystools]","pos":[3301.16796875,288.43280029296875],"size":[270,78],"flags":{},"order":48,"mode":0,"inputs":[{"localized_name":"any","name":"any","type":"*","link":1107},{"localized_name":"boolean","name":"boolean","type":"BOOLEAN","widget":{"name":"boolean"},"link":1111}],"outputs":[{"localized_name":"on_true","name":"on_true","type":"*","links":[1108]},{"localized_name":"on_false","name":"on_false","type":"*","links":null}],"properties":{"cnr_id":"ComfyUI-Crystools","ver":"2af9ccf0a29c6910e6fcbdd7d2fe96f9bde44eed","Node name for S&R":"Switch from any [Crystools]","ue_properties":{"widget_ue_connectable":{"boolean":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[true]},{"id":572,"type":"WanVaceToVideo","pos":[3665.003662109375,283.3869934082031],"size":[270,254],"flags":{},"order":49,"mode":0,"inputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":1049},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":1050},{"localized_name":"vae","name":"vae","type":"VAE","link":1051},{"localized_name":"control_video","name":"control_video","shape":7,"type":"IMAGE","link":1106},{"localized_name":"control_masks","name":"control_masks","shape":7,"type":"MASK","link":1108},{"localized_name":"reference_image","name":"reference_image","shape":7,"type":"IMAGE","link":1137},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":1069},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":1070},{"localized_name":"length","name":"length","type":"INT","widget":{"name":"length"},"link":1067},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":[1044]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":[1045]},{"localized_name":"latent","name":"latent","type":"LATENT","links":[1046]},{"localized_name":"trim_latent","name":"trim_latent","type":"INT","links":[1138]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.59","Node name for S&R":"WanVaceToVideo","ue_properties":{"widget_ue_connectable":{"length":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[16,512,65,1,1]},{"id":563,"type":"KSampler","pos":[3965.003173828125,163.38685607910156],"size":[270,474.00006103515625],"flags":{},"order":50,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":1043},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":1044},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":1045},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":1046},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":1085},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","links":[1139]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.59","Node name for S&R":"KSampler","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[609992663775958,"randomize",4,1,"sa_solver","beta",1]},{"id":636,"type":"TrimVideoLatent","pos":[3964.803955078125,698.47705078125],"size":[270,58],"flags":{},"order":51,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":1139},{"localized_name":"trim_amount","name":"trim_amount","type":"INT","widget":{"name":"trim_amount"},"link":1138}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","links":[1140]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.60","Node name for S&R":"TrimVideoLatent","ue_properties":{"widget_ue_connectable":{"trim_amount":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[0]},{"id":623,"type":"Switch any [Crystools]","pos":[4272.0537109375,696.0496215820312],"size":[264.4505310058594,78],"flags":{},"order":56,"mode":0,"inputs":[{"localized_name":"on_true","name":"on_true","type":"*","link":1117},{"localized_name":"on_false","name":"on_false","type":"*","link":1118},{"localized_name":"boolean","name":"boolean","type":"BOOLEAN","widget":{"name":"boolean"},"link":1133}],"outputs":[{"localized_name":"*","name":"*","type":"*","links":[1119]}],"title":"🪛 Skip first batch color match","properties":{"cnr_id":"ComfyUI-Crystools","ver":"2af9ccf0a29c6910e6fcbdd7d2fe96f9bde44eed","Node name for S&R":"Switch any [Crystools]","ue_properties":{"widget_ue_connectable":{"boolean":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[true]},{"id":588,"type":"VRAM_Debug","pos":[4714.43310546875,164.1796417236328],"size":[291.1640625,186],"flags":{"collapsed":false},"order":58,"mode":0,"inputs":[{"localized_name":"any_input","name":"any_input","shape":7,"type":"*","link":null},{"localized_name":"image_pass","name":"image_pass","shape":7,"type":"IMAGE","link":1119},{"localized_name":"model_pass","name":"model_pass","shape":7,"type":"MODEL","link":null},{"localized_name":"empty_cache","name":"empty_cache","type":"BOOLEAN","widget":{"name":"empty_cache"},"link":null},{"localized_name":"gc_collect","name":"gc_collect","type":"BOOLEAN","widget":{"name":"gc_collect"},"link":null},{"localized_name":"unload_all_models","name":"unload_all_models","type":"BOOLEAN","widget":{"name":"unload_all_models"},"link":null}],"outputs":[{"localized_name":"any_output","name":"any_output","type":"*","links":[]},{"localized_name":"image_pass","name":"image_pass","type":"IMAGE","links":[1056,1131,1151]},{"localized_name":"model_pass","name":"model_pass","type":"MODEL","links":[]},{"label":"13,758,114,842   freemem_before","localized_name":"freemem_before","name":"freemem_before","type":"INT","links":[]},{"label":"15,637,282,816      freemem_after","localized_name":"freemem_after","name":"freemem_after","type":"INT","links":[]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"1.1.6","Node name for S&R":"VRAM_Debug","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[true,true,true]},{"id":582,"type":"ImageFromBatch+","pos":[5126.11376953125,-2.7026448249816895],"size":[270,82],"flags":{"collapsed":false},"order":60,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":1056},{"localized_name":"start","name":"start","type":"INT","widget":{"name":"start"},"link":1071},{"localized_name":"length","name":"length","type":"INT","widget":{"name":"length"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[1152]}],"title":"Remove overlapping loop frames","properties":{"cnr_id":"comfyui_essentials","ver":"1.1.0","Node name for S&R":"ImageFromBatch+","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[10,-1]},{"id":621,"type":"Basic data handling: Boolean Or","pos":[2908.9072265625,173.58389282226562],"size":[298.71173095703125,71.28929901123047],"flags":{},"order":42,"mode":0,"inputs":[{"localized_name":"input1","name":"input1","type":"BOOLEAN","link":1113},{"localized_name":"input2","name":"input2","type":"BOOLEAN","link":1112}],"outputs":[{"localized_name":"BOOLEAN","name":"BOOLEAN","type":"BOOLEAN","links":[1110,1111]}],"title":"Initial I2V or Last Frames","properties":{"cnr_id":"basic_data_handling","ver":"0.6.0","Node name for S&R":"Basic data handling: Boolean Or","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[]},{"id":577,"type":"VAEDecode","pos":[4275.22802734375,255.65377807617188],"size":[140,46],"flags":{"collapsed":false},"order":53,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":1041},{"localized_name":"vae","name":"vae","type":"VAE","link":1042}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[1048,1118,1122]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.59","Node name for S&R":"VAEDecode","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[]},{"id":618,"type":"Basic data handling: CastToBoolean","pos":[2899.15087890625,307.94134521484375],"size":[248.75965881347656,26],"flags":{},"order":38,"mode":0,"inputs":[{"localized_name":"input","name":"input","type":"*","link":1103}],"outputs":[{"localized_name":"BOOLEAN","name":"BOOLEAN","type":"BOOLEAN","links":[1112,1132,1133,1155]}],"title":"False when loop index==0","properties":{"cnr_id":"basic_data_handling","ver":"0.6.0","Node name for S&R":"Basic data handling: CastToBoolean","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[]},{"id":620,"type":"easy boolean","pos":[-1060.552001953125,-40.03363800048828],"size":[443.1120300292969,58.19401931762695],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"BOOLEAN","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"boolean","name":"boolean","type":"BOOLEAN","links":[1113,1156]}],"title":"True = I2V, False = T2V","properties":{"cnr_id":"comfyui-easy-use","ver":"1.3.3","Node name for S&R":"easy boolean","ue_properties":{"widget_ue_connectable":{"value":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[false],"color":"#1a652d","bgcolor":"#065119"},{"id":562,"type":"ModelSamplingSD3","pos":[3665.003662109375,163.38685607910156],"size":[270,58],"flags":{},"order":23,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":1160},{"localized_name":"shift","name":"shift","type":"FLOAT","widget":{"name":"shift"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[1043]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.59","Node name for S&R":"ModelSamplingSD3","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[8]},{"id":581,"type":"ImageBatchMulti","pos":[5869.01904296875,-18.289323806762695],"size":[210,102],"flags":{"collapsed":false},"order":63,"mode":0,"inputs":[{"localized_name":"image_1","name":"image_1","type":"IMAGE","link":1025},{"localized_name":"image_2","name":"image_2","shape":7,"type":"IMAGE","link":1153},{"localized_name":"inputcount","name":"inputcount","type":"INT","widget":{"name":"inputcount"},"link":null}],"outputs":[{"localized_name":"images","name":"images","type":"IMAGE","links":[1024]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"1.1.1","ue_properties":{"version":"7.0.1","widget_ue_connectable":{"inputcount":true}}},"widgets_values":[2,null]},{"id":593,"type":"Float","pos":[-376.6231689453125,-42.20772933959961],"size":[210,58],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"FLOAT","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"FLOAT","name":"FLOAT","type":"FLOAT","links":[1075]}],"title":"Megapixels","properties":{"cnr_id":"comfyui-logic","ver":"1.0.0","Node name for S&R":"Float","ue_properties":{"widget_ue_connectable":{"value":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[0.9],"color":"#232","bgcolor":"#353"},{"id":597,"type":"LoadImage","pos":[-1068.255859375,65.0512924194336],"size":[457.2888488769531,498.3210754394531],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[1076]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"title":"Start Image","properties":{"cnr_id":"comfy-core","ver":"0.3.51","Node name for S&R":"LoadImage","ue_properties":{"version":"7.0.1","widget_ue_connectable":{"image":true,"upload":true}}},"widgets_values":["00064-1319421715.jpg","image"],"color":"#232","bgcolor":"#353"},{"id":557,"type":"MathExpression|pysssss","pos":[691.4857788085938,148.72723388671875],"size":[210,128],"flags":{},"order":27,"mode":0,"inputs":[{"localized_name":"a","name":"a","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":1013},{"localized_name":"b","name":"b","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":null},{"localized_name":"c","name":"c","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":null},{"localized_name":"expression","name":"expression","type":"INT,FLOAT,IMAGE,LATENT","widget":{"name":"expression"},"link":null}],"outputs":[{"localized_name":"INT","name":"INT","type":"INT","links":[1014]},{"localized_name":"FLOAT","name":"FLOAT","type":"FLOAT","links":[]}],"properties":{"cnr_id":"comfyui-custom-scripts","ver":"1.2.5","ue_properties":{"widget_ue_connectable":{"expression":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":["(a/16)"]},{"id":640,"type":"Basic data handling: Boolean Or","pos":[5424.54345703125,20.136009216308594],"size":[140,46],"flags":{},"order":43,"mode":0,"inputs":[{"localized_name":"input1","name":"input1","type":"BOOLEAN","link":1156},{"localized_name":"input2","name":"input2","type":"BOOLEAN","link":1155}],"outputs":[{"localized_name":"BOOLEAN","name":"BOOLEAN","type":"BOOLEAN","links":[1157]}],"properties":{"cnr_id":"basic_data_handling","ver":"0.6.0","Node name for S&R":"Basic data handling: Boolean Or","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[]},{"id":589,"type":"StringFromList","pos":[1610.092041015625,275.46881103515625],"size":[250,98],"flags":{"collapsed":false},"order":19,"mode":0,"inputs":[{"localized_name":"list_input","name":"list_input","type":"STRING","link":1027},{"localized_name":"index","name":"index","type":"INT","widget":{"name":"index"},"link":null}],"outputs":[{"localized_name":"list item","name":"list item","shape":6,"type":"STRING","links":[]},{"localized_name":"size","name":"size","type":"INT","links":[1026,1163]},{"localized_name":"wraps","name":"wraps","shape":6,"type":"INT","links":[]}],"properties":{"cnr_id":"comfyui-selectstringfromlistwithindex","ver":"1.0.0","Node name for S&R":"StringFromList","ue_properties":{"widget_ue_connectable":{"index":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[0]},{"id":584,"type":"VHS_VideoCombine","pos":[5710.8212890625,187.4081573486328],"size":[642.1847534179688,697.9789428710938],"flags":{},"order":66,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":1166},{"localized_name":"audio","name":"audio","shape":7,"type":"AUDIO","link":null},{"localized_name":"meta_batch","name":"meta_batch","shape":7,"type":"VHS_BatchManager","link":null},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":null},{"localized_name":"frame_rate","name":"frame_rate","type":"FLOAT","widget":{"name":"frame_rate"},"link":1010},{"localized_name":"loop_count","name":"loop_count","type":"INT","widget":{"name":"loop_count"},"link":null},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":1077},{"localized_name":"format","name":"format","type":"COMBO","widget":{"name":"format"},"link":null},{"localized_name":"pingpong","name":"pingpong","type":"BOOLEAN","widget":{"name":"pingpong"},"link":null},{"localized_name":"save_output","name":"save_output","type":"BOOLEAN","widget":{"name":"save_output"},"link":null},{"name":"pix_fmt","type":["yuv420p","yuv420p10le"],"widget":{"name":"pix_fmt"},"link":null},{"name":"crf","type":"INT","widget":{"name":"crf"},"link":null},{"name":"save_metadata","type":"BOOLEAN","widget":{"name":"save_metadata"},"link":null},{"name":"trim_to_audio","type":"BOOLEAN","widget":{"name":"trim_to_audio"},"link":null}],"outputs":[{"localized_name":"Filenames","name":"Filenames","type":"VHS_FILENAMES","links":[]}],"properties":{"cnr_id":"comfyui-videohelpersuite","ver":"1.7.4","Node name for S&R":"VHS_VideoCombine","ue_properties":{"version":"7.0.1","widget_ue_connectable":{"frame_rate":true,"loop_count":true,"filename_prefix":true,"format":true,"pingpong":true,"save_output":true,"pix_fmt":true,"crf":true,"save_metadata":true,"trim_to_audio":true}}},"widgets_values":{"frame_rate":16,"loop_count":0,"filename_prefix":"bla/test","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":16,"save_metadata":true,"trim_to_audio":false,"pingpong":false,"save_output":true,"videopreview":{"hidden":false,"paused":true,"params":{"filename":"long_00072.mp4","subfolder":"rapid-aio","type":"output","format":"video/h264-mp4","frame_rate":16,"workflow":"long_00072.png","fullpath":"E:\\StabilityMatrix2\\Packages\\ComfyUI\\output\\rapid-aio\\long_00072.mp4"}}}},{"id":558,"type":"easy forLoopEnd","pos":[6120.46484375,-19.744855880737305],"size":[196.2582550048828,86],"flags":{},"order":64,"mode":0,"inputs":[{"localized_name":"flow","name":"flow","shape":5,"type":"FLOW_CONTROL","link":1021},{"localized_name":"initial_value1","name":"initial_value1","shape":7,"type":"*","link":1024},{"name":"initial_value2","type":"*","link":1125},{"name":"initial_value3","type":"*","link":null}],"outputs":[{"localized_name":"value1","name":"value1","type":"*","links":[1030]},{"name":"value2","type":"*","links":[]},{"name":"value3","type":"*","links":null}],"properties":{"cnr_id":"comfyui-easy-use","ver":"1.3.0","Node name for S&R":"easy forLoopEnd","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[],"color":"#223","bgcolor":"#335"},{"id":639,"type":"Switch any [Crystools]","pos":[5603.0654296875,-2.031595230102539],"size":[231.07382202148438,78],"flags":{},"order":62,"mode":0,"inputs":[{"localized_name":"on_true","name":"on_true","type":"*","link":1152},{"localized_name":"on_false","name":"on_false","type":"*","link":1151},{"localized_name":"boolean","name":"boolean","type":"BOOLEAN","widget":{"name":"boolean"},"link":1157}],"outputs":[{"localized_name":"*","name":"*","type":"*","links":[1153]}],"title":"🪛 Don't crop T2V start","properties":{"cnr_id":"ComfyUI-Crystools","ver":"2af9ccf0a29c6910e6fcbdd7d2fe96f9bde44eed","Node name for S&R":"Switch any [Crystools]","ue_properties":{"widget_ue_connectable":{"boolean":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[true]},{"id":592,"type":"Int","pos":[-600,-40],"size":[210,58],"flags":{"collapsed":false},"order":10,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"INT","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"INT","name":"INT","type":"INT","links":[1074]}],"title":"Seconds/batch","properties":{"cnr_id":"comfyui-logic","ver":"1.0.0","Node name for S&R":"Int","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[4],"color":"#232","bgcolor":"#353"},{"id":635,"type":"LoadImage","pos":[-1062.727294921875,616.6522216796875],"size":[454.52728271484375,411.79840087890625],"flags":{},"order":11,"mode":4,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[1137]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"title":"Reference Image","properties":{"cnr_id":"comfy-core","ver":"0.3.51","Node name for S&R":"LoadImage","ue_properties":{"version":"7.0.1","widget_ue_connectable":{"image":true,"upload":true}}},"widgets_values":["00066-2712081279.jpg","image"],"color":"#232","bgcolor":"#353"},{"id":583,"type":"ImageFromBatch+","pos":[5243.3447265625,242.37753295898438],"size":[270,82],"flags":{"collapsed":false},"order":65,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":1030},{"localized_name":"start","name":"start","type":"INT","widget":{"name":"start"},"link":1072},{"localized_name":"length","name":"length","type":"INT","widget":{"name":"length"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[1166]}],"title":"Remove overlapping start frames","properties":{"cnr_id":"comfyui_essentials","ver":"1.1.0","Node name for S&R":"ImageFromBatch+","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[10,-1]},{"id":561,"type":"easy forLoopStart","pos":[1600.448974609375,-8.327929496765137],"size":[270,158],"flags":{},"order":35,"mode":0,"inputs":[{"localized_name":"initial_value1","name":"initial_value1","shape":7,"type":"*","link":1065},{"localized_name":"total","name":"total","type":"INT","widget":{"name":"total"},"link":1026},{"name":"initial_value2","type":"*","link":1121},{"name":"initial_value3","type":"*","link":null}],"outputs":[{"localized_name":"flow","name":"flow","shape":5,"type":"FLOW_CONTROL","links":[1021]},{"localized_name":"index","name":"index","type":"INT","links":[1029,1084,1103,1167]},{"localized_name":"value1","name":"value1","type":"*","links":[1025,1034,1035]},{"name":"value2","type":"*","links":[1127,1128]},{"name":"value3","type":"*","links":null}],"properties":{"cnr_id":"comfyui-easy-use","ver":"1.3.0","Node name for S&R":"easy forLoopStart","ue_properties":{"widget_ue_connectable":{"total":true},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[3],"color":"#223","bgcolor":"#335"},{"id":644,"type":"easy showAnything","pos":[3676.559326171875,588.2095947265625],"size":[210,88],"flags":{},"order":39,"mode":0,"inputs":[{"localized_name":"anything","name":"anything","shape":7,"type":"*","link":1167}],"outputs":[{"localized_name":"output","name":"output","type":"*","links":null}],"title":"Info: Current Loop","properties":{"cnr_id":"comfyui-easy-use","ver":"1.3.3","Node name for S&R":"easy showAnything","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":["8"]},{"id":574,"type":"CheckpointLoaderSimple","pos":[-582.5961303710938,837.4872436523438],"size":[435.177734375,103.22970581054688],"flags":{"collapsed":false},"order":12,"mode":0,"inputs":[{"localized_name":"ckpt_name","name":"ckpt_name","type":"COMBO","widget":{"name":"ckpt_name"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[1158]},{"localized_name":"CLIP","name":"CLIP","type":"CLIP","links":[1159]},{"localized_name":"VAE","name":"VAE","type":"VAE","links":[1042,1051]}],"title":"RapidAIO Mega Checkpoint","properties":{"cnr_id":"comfy-core","ver":"0.3.59","Node name for S&R":"CheckpointLoaderSimple","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":["wan2.2-rapid-mega-nsfw-aio-v3.1.safetensors"],"color":"#232","bgcolor":"#353"},{"id":591,"type":"CreaPrompt List","pos":[-593.766845703125,229.41017150878906],"size":[846.7593383789062,556.6138916015625],"flags":{"collapsed":false},"order":13,"mode":0,"inputs":[{"localized_name":"Multi_prompts","name":"Multi_prompts","type":"STRING","widget":{"name":"Multi_prompts"},"link":null},{"localized_name":"prefix","name":"prefix","type":"STRING","widget":{"name":"prefix"},"link":null},{"localized_name":"suffix","name":"suffix","type":"STRING","widget":{"name":"suffix"},"link":null}],"outputs":[{"localized_name":"prompt","name":"prompt","shape":6,"type":"STRING","links":[1027,1028]},{"localized_name":"prompt_debug","name":"prompt_debug","shape":6,"type":"STRING","links":[]}],"properties":{"cnr_id":"comfyui_creaprompt","ver":"1.6.0","Node name for S&R":"CreaPrompt List","ue_properties":{"version":"7.1","widget_ue_connectable":{},"input_ue_unconnectable":{}}},"widgets_values":["2 photorealistic Vampires run to the right. Tracking shot. photorealistic Bats fly around.\n2 photorealistic Vampires stop and stand. A photorealistic werewolf appears on the right side. photorealistic Bats leave scene.\n2 photorealistic Vampires laugh. Then a photorealistic werewolf growls.\n2 photorealistic Vampires become scared. The photorealistic werewolf howls.\nThe photorealistic werewolf attacks a photorealistic vampire. The photorealistic vampire is quickly defeated fallen to the ground.\nThe photorealistic werewolf attacks photorealistic vampire.\nCamera zoom close shot to photorealistic werewolf face. The photorealistic werewolf snarls and shows teeth.\nCamera zoom close shot to photorealistic werewolf face. The photorealistic werewolf snarls and shows teeth.","Nighttime in a photorealistic graveyard, moon light, camera panning to right. Photorealistic Tombstones, photorealistic fog, photorealistic dead trees.","Cinematic scene, high quality photography, (photorealistic). Real life. Emotional. Fine details."],"color":"#232","bgcolor":"#353"},{"id":596,"type":"Note","pos":[-593.1587524414062,66.54759216308594],"size":[847.9064331054688,110.0701904296875],"flags":{},"order":14,"mode":0,"inputs":[],"outputs":[],"properties":{"ue_properties":{"version":"7.0.1","widget_ue_connectable":{}}},"widgets_values":["Important! Always double check the bright box for I2V (true) or T2V (false). Reference image is still needed for aspect ratio for T2V. \nAssuming 16:9 image input: Megapixel of 0.4 = 864x480, 0.5 = 960x528, 0.7 = 1136x640, 0.9 = 1280x720\nEach line (new line separation) of the prompt creates a batch for the loop. If 4 seconds per batch and 5 lines entered, then create a 20 second video. Note that 4 seconds won't just create 65 frames per batch, it will create 77 because it adds 12 frames for overlap.\nThe reference image can be used in both I2V and T2V. This is like a mini LoRA. Use real WAN LoRAs to control the look more.\nPrompt tip: prefix every subject with \"photorealistic\" or the style of your choosing. Specifying photorealistic like a seperate tag does not work.\n\n\n\n\n\n\n\n"],"color":"#432","bgcolor":"#653"},{"id":628,"type":"PreviewImage","pos":[5096.04443359375,462.3366394042969],"size":[567.35107421875,413.5726318359375],"flags":{},"order":61,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":1131}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.60","Node name for S&R":"PreviewImage","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[]},{"id":641,"type":"Power Lora Loader (rgthree)","pos":[-127.41326141357422,833.6700439453125],"size":[375.23077392578125,190],"flags":{},"order":18,"mode":0,"inputs":[{"dir":3,"name":"model","type":"MODEL","link":1158},{"dir":3,"name":"clip","type":"CLIP","link":1159}],"outputs":[{"dir":4,"name":"MODEL","shape":3,"type":"MODEL","links":[1160]},{"dir":4,"name":"CLIP","shape":3,"type":"CLIP","links":[1161,1162]}],"properties":{"cnr_id":"rgthree-comfy","ver":"1.0.2509092031","Show Strengths":"Single Strength","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":[{},{"type":"PowerLoraLoaderHeaderWidget"},{"on":false,"lora":"wan\\detailz-wan.safetensors","strength":1,"strengthTwo":null},{},""],"color":"#232","bgcolor":"#353"},{"id":642,"type":"easy showAnything","pos":[3677.8671875,721.4124145507812],"size":[210,88],"flags":{},"order":25,"mode":0,"inputs":[{"localized_name":"anything","name":"anything","shape":7,"type":"*","link":1163}],"outputs":[{"localized_name":"output","name":"output","type":"*","links":null}],"title":"Info: Loop Total","properties":{"cnr_id":"comfyui-easy-use","ver":"1.3.3","Node name for S&R":"easy showAnything","ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":["8"]}],"links":[[1009,573,0,580,1,"INT,FLOAT,IMAGE,LATENT"],[1010,573,1,584,4,"FLOAT"],[1012,552,0,556,0,"INT,FLOAT,IMAGE,LATENT"],[1013,552,1,557,0,"INT,FLOAT,IMAGE,LATENT"],[1014,557,0,555,0,"INT,FLOAT,IMAGE,LATENT"],[1015,556,0,554,0,"INT,FLOAT,IMAGE,LATENT"],[1016,553,0,552,0,"IMAGE"],[1019,554,0,586,2,"INT"],[1020,555,0,586,3,"INT"],[1021,561,0,558,0,"FLOW_CONTROL"],[1022,580,0,579,0,"INT,FLOAT,IMAGE,LATENT"],[1023,585,0,579,1,"INT,FLOAT,IMAGE,LATENT"],[1024,581,0,558,1,"*"],[1025,561,2,581,0,"IMAGE"],[1026,589,1,561,1,"INT"],[1027,591,0,589,0,"STRING"],[1028,591,0,565,0,"STRING"],[1029,561,1,565,1,"INT"],[1030,558,0,583,0,"IMAGE"],[1033,559,3,560,0,"INT,FLOAT,IMAGE,LATENT"],[1034,561,2,559,0,"IMAGE"],[1035,561,2,575,0,"IMAGE"],[1036,560,0,575,1,"INT"],[1037,585,0,560,1,"INT,FLOAT,IMAGE,LATENT"],[1041,564,0,577,0,"LATENT"],[1042,574,2,577,1,"VAE"],[1043,562,0,563,0,"MODEL"],[1044,572,0,563,1,"CONDITIONING"],[1045,572,1,563,2,"CONDITIONING"],[1046,572,2,563,3,"LATENT"],[1048,577,0,587,0,"IMAGE"],[1049,566,0,572,0,"CONDITIONING"],[1050,567,0,572,1,"CONDITIONING"],[1051,574,2,572,2,"VAE"],[1056,588,1,582,0,"IMAGE"],[1057,565,0,566,1,"STRING"],[1058,569,2,571,1,"IMAGE"],[1059,568,0,569,1,"INT"],[1060,569,0,570,0,"FLOW_CONTROL"],[1061,571,0,570,1,"*"],[1062,586,0,571,0,"IMAGE"],[1063,586,0,569,0,"*"],[1064,585,0,568,0,"INT,FLOAT,IMAGE,LATENT"],[1065,570,0,561,0,"*"],[1066,579,0,576,4,"INT"],[1067,579,0,572,8,"INT"],[1068,586,0,578,0,"IMAGE"],[1069,578,0,572,6,"INT"],[1070,578,1,572,7,"INT"],[1071,585,0,582,1,"INT"],[1072,585,0,583,1,"INT"],[1074,592,0,580,0,"INT,FLOAT,IMAGE,LATENT"],[1075,593,0,553,2,"FLOAT"],[1076,597,0,553,0,"IMAGE"],[1077,595,0,584,6,"STRING"],[1079,553,0,586,0,"IMAGE"],[1083,603,0,602,0,"INT,FLOAT,IMAGE,LATENT"],[1084,561,1,602,1,"INT,FLOAT,IMAGE,LATENT"],[1085,602,0,563,4,"INT"],[1090,575,0,576,0,"IMAGE"],[1103,561,1,618,0,"*"],[1105,576,0,617,0,"*"],[1106,617,0,572,3,"IMAGE"],[1107,576,1,619,0,"*"],[1108,619,0,572,4,"MASK"],[1110,621,0,617,1,"BOOLEAN"],[1111,621,0,619,1,"BOOLEAN"],[1112,618,0,621,1,"BOOLEAN"],[1113,620,0,621,0,"BOOLEAN"],[1117,587,0,623,0,"*"],[1118,577,0,623,1,"*"],[1119,623,0,588,1,"IMAGE"],[1121,586,0,561,2,"*"],[1122,577,0,624,0,"IMAGE"],[1123,624,0,625,1,"*"],[1125,625,0,558,2,"*"],[1127,561,3,625,0,"*"],[1128,561,3,587,1,"IMAGE"],[1130,625,0,627,0,"IMAGE"],[1131,588,1,628,0,"IMAGE"],[1132,618,0,625,2,"BOOLEAN"],[1133,618,0,623,2,"BOOLEAN"],[1134,585,0,630,1,"INT,FLOAT,IMAGE,LATENT"],[1135,580,0,630,0,"INT,FLOAT,IMAGE,LATENT"],[1136,630,0,624,1,"INT"],[1137,635,0,572,5,"IMAGE"],[1138,572,3,636,1,"INT"],[1139,563,0,636,0,"LATENT"],[1140,636,0,564,0,"*"],[1151,588,1,639,1,"*"],[1152,582,0,639,0,"*"],[1153,639,0,581,1,"IMAGE"],[1155,618,0,640,1,"BOOLEAN"],[1156,620,0,640,0,"BOOLEAN"],[1157,640,0,639,2,"BOOLEAN"],[1158,574,0,641,0,"MODEL"],[1159,574,1,641,1,"CLIP"],[1160,641,0,562,0,"MODEL"],[1161,641,1,566,0,"CLIP"],[1162,641,1,567,0,"CLIP"],[1163,589,1,642,0,"*"],[1166,583,0,584,0,"IMAGE"],[1167,561,1,644,0,"*"]],"groups":[{"id":1,"title":"Frame compute","bounding":[1567.4041748046875,607.244873046875,1195.72265625,257.923095703125],"color":"#3f789e","font_size":24,"flags":{}},{"id":2,"title":"Scale to megapixel and calculated nearest width/height divisible by 16","bounding":[373.5478210449219,-107.01834869384766,1084.42578125,415.8085632324219],"color":"#3f789e","font_size":24,"flags":{}},{"id":1,"title":"Remove overlapping start frames","bounding":[5090.82177734375,149.1690673828125,566.0362548828125,255.85525512695312],"color":"#3f789e","font_size":24,"flags":{}},{"id":2,"title":"Loop end","bounding":[5092.74462890625,-104.2308578491211,1254.9871826171875,232.81163024902344],"color":"#3f789e","font_size":24,"flags":{}},{"id":4,"title":"Loop start","bounding":[1563.3363037109375,-94.89299774169922,1200,653.5999755859375],"color":"#3f789e","font_size":24,"flags":{}},{"id":3,"title":"Overlapping start frames","bounding":[1913.3358154296875,-54.89297866821289,840,270],"color":"#3f789e","font_size":24,"flags":{}},{"id":5,"title":"Create first overlapping frames from start frame","bounding":[378.2871398925781,389.61309814453125,1075.8505859375,338.689208984375],"color":"#3f789e","font_size":24,"flags":{}},{"id":6,"title":"RapidAIO batch","bounding":[2865.00244140625,83.38699340820312,2162.821533203125,781.2582397460938],"color":"#3f789e","font_size":24,"flags":{}},{"id":7,"title":"I2V or T2V Input.","bounding":[-1090,-130,1364.025146484375,1188.6702880859375],"color":"#8A8","font_size":24,"flags":{}}],"config":{},"extra":{"frontendVersion":"1.26.13","VHS_latentpreview":false,"VHS_latentpreviewrate":0,"VHS_MetadataImage":true,"VHS_KeepIntermediate":true,"ue_links":[],"links_added_by_ue":[],"ds":{"scale":0.8769226950000023,"offset":[-3051.4185918699022,2.702362314441737]}},"version":0.4}
